cmake_minimum_required(VERSION 3.8.0)
project(PROJECT_NAME VERSION 0.0.1)

set(CMAKE_CXX_COMPILER "C:/UCRT_GCC-12-2-0/mingw64/bin/g++.exe")
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# When this option is set to ON, the code generated by the compiler is made position-independent.
# This is useful for libraries that will be linked into other executables, as it ensures that the code
# can be loaded at any address and still work correctly.
# In the context of googletest, you would typically set this option to ON if you are building
# a shared library that will be linked with the googletest library.
# This will ensure that the shared library can be loaded at any address without causing any problems.
set(CMAKE_POSITION_INDEPENDENT_CODE ON)

enable_testing()
# add googletest library
add_subdirectory(googletest)

# add headers
set(HEADERS_DIR "${CMAKE_SOURCE_DIR}/tested_headers")
include_directories(${HEADERS_DIR})
# Find all code files and add them accordingly
file(
	GLOB PROJECT_SOURCES CONFIGURE_DEPENDS 
	"${CMAKE_SOURCE_DIR}/src.cpp"
	"${HEADERS_DIR}/*.cpp"
	"${HEADERS_DIR}/*.hpp"
)

add_library(
	PROJECT_NAME
	STATIC ${PROJECT_SOURCES}
)

add_subdirectory(tests)
